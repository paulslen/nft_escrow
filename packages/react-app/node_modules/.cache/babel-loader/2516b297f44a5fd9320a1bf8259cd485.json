{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport { useCallback, useEffect, useState } from \"react\";\nimport { ethers } from \"ethers\";\n\nconst createProvider = async url => {\n  const p = new ethers.providers.StaticJsonRpcProvider(url);\n  await p.ready;\n  return p;\n};\n\nexport default function useStaticJsonRPC(urlArray, localProvider = null) {\n  _s();\n\n  const [provider, setProvider] = useState(null);\n  const handleProviders = useCallback(async () => {\n    try {\n      const p = await Promise.race(urlArray.map(createProvider));\n\n      const _p = await p;\n\n      setProvider(_p);\n    } catch (error) {\n      // todo: show notification error about provider issues\n      console.log(error);\n    }\n  }, [urlArray]);\n  useEffect(() => {\n    // Re-use the localProvider if it's mainnet (to use only one instance of it)\n    if (localProvider && (localProvider === null || localProvider === void 0 ? void 0 : localProvider._network.chainId) === 1) {\n      setProvider(localProvider);\n      return;\n    }\n\n    handleProviders(); // eslint-disable-next-line\n  }, [JSON.stringify(urlArray), localProvider]);\n  return provider;\n}\n\n_s(useStaticJsonRPC, \"/2xxz5UzLV/r/IXRlLyJQA12Q34=\");","map":{"version":3,"sources":["/home/leniu/dev/nft_escrow/packages/react-app/src/hooks/useStaticJsonRPC.js"],"names":["useCallback","useEffect","useState","ethers","createProvider","url","p","providers","StaticJsonRpcProvider","ready","useStaticJsonRPC","urlArray","localProvider","provider","setProvider","handleProviders","Promise","race","map","_p","error","console","log","_network","chainId","JSON","stringify"],"mappings":";;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,SAASC,MAAT,QAAuB,QAAvB;;AAEA,MAAMC,cAAc,GAAG,MAAMC,GAAN,IAAa;AAClC,QAAMC,CAAC,GAAG,IAAIH,MAAM,CAACI,SAAP,CAAiBC,qBAArB,CAA2CH,GAA3C,CAAV;AAEA,QAAMC,CAAC,CAACG,KAAR;AAEA,SAAOH,CAAP;AACD,CAND;;AAQA,eAAe,SAASI,gBAAT,CAA0BC,QAA1B,EAAoCC,aAAa,GAAG,IAApD,EAA0D;AAAA;;AACvE,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BZ,QAAQ,CAAC,IAAD,CAAxC;AAEA,QAAMa,eAAe,GAAGf,WAAW,CAAC,YAAY;AAC9C,QAAI;AACF,YAAMM,CAAC,GAAG,MAAMU,OAAO,CAACC,IAAR,CAAaN,QAAQ,CAACO,GAAT,CAAad,cAAb,CAAb,CAAhB;;AACA,YAAMe,EAAE,GAAG,MAAMb,CAAjB;;AAEAQ,MAAAA,WAAW,CAACK,EAAD,CAAX;AACD,KALD,CAKE,OAAOC,KAAP,EAAc;AACd;AACAC,MAAAA,OAAO,CAACC,GAAR,CAAYF,KAAZ;AACD;AACF,GAVkC,EAUhC,CAACT,QAAD,CAVgC,CAAnC;AAYAV,EAAAA,SAAS,CAAC,MAAM;AACd;AACA,QAAIW,aAAa,IAAI,CAAAA,aAAa,SAAb,IAAAA,aAAa,WAAb,YAAAA,aAAa,CAAEW,QAAf,CAAwBC,OAAxB,MAAoC,CAAzD,EAA4D;AAC1DV,MAAAA,WAAW,CAACF,aAAD,CAAX;AACA;AACD;;AAEDG,IAAAA,eAAe,GAPD,CASd;AACD,GAVQ,EAUN,CAACU,IAAI,CAACC,SAAL,CAAef,QAAf,CAAD,EAA2BC,aAA3B,CAVM,CAAT;AAYA,SAAOC,QAAP;AACD;;GA5BuBH,gB","sourcesContent":["import { useCallback, useEffect, useState } from \"react\";\nimport { ethers } from \"ethers\";\n\nconst createProvider = async url => {\n  const p = new ethers.providers.StaticJsonRpcProvider(url);\n\n  await p.ready;\n\n  return p;\n};\n\nexport default function useStaticJsonRPC(urlArray, localProvider = null) {\n  const [provider, setProvider] = useState(null);\n\n  const handleProviders = useCallback(async () => {\n    try {\n      const p = await Promise.race(urlArray.map(createProvider));\n      const _p = await p;\n\n      setProvider(_p);\n    } catch (error) {\n      // todo: show notification error about provider issues\n      console.log(error);\n    }\n  }, [urlArray]);\n\n  useEffect(() => {\n    // Re-use the localProvider if it's mainnet (to use only one instance of it)\n    if (localProvider && localProvider?._network.chainId === 1) {\n      setProvider(localProvider);\n      return;\n    }\n\n    handleProviders();\n\n    // eslint-disable-next-line\n  }, [JSON.stringify(urlArray), localProvider]);\n\n  return provider;\n}\n"]},"metadata":{},"sourceType":"module"}